# Example dataset configuration demonstrating simplified structure
# Inherits directly from dataset_default.yaml
defaults:
  - dataset_default.yaml
  - _self_

# =============================================================================
# DATASET METADATA
# =============================================================================
dataset:
  name: "bowel_disease"
  description: |
    A dataset of bowel disease samples from Schaefer et al. 2024.
    Originally published in Parikh, Kaushal, Agne Antanaviciute, David Fawkner-Corbett, Marta Jagielowicz, Anna Aulicino,
    Christoffer Lagerholm, Simon Davis, et al. 2019.
    Colonic Epithelial Cell Diversity in Health and Inflammatory Bowel Disease. Nature 567 (7746): 49â€“55.
  download_url: "https://medical-epigenomics.org/papers/schaefer2024/data/datasets/bowel_disease/cellxgene.h5ad"
  full_name: "bowel_disease"

# =============================================================================
# COMMON KEYS (dataset-specific)
# =============================================================================
batch_key: "sample_id"
annotation_key: "cluster_label" # An annotation done by the authors
caption_key: null
instrument_key: null
other_bio_labels: []

# =============================================================================
# DATASET-SPECIFIC OVERRIDES
# =============================================================================
# Download configuration
download:
  enabled: true
  subset_size: null

# Preprocessing overrides (both dataset-specific and execution parameters)
preprocessing:
  # Dataset-specific parameters
  enabled: true
  split_dataset: false # Important for training datasets. Set to false for test datasets. (Similar parameters in dataset_creation)
  count_layer_key: null # Key in adata.layers with raw counts. If not present, adata.raw.X is checked.

embedding_preparation:
  enabled: true
  methods: ["geneformer"]

# Embedding overrides (both dataset-specific and execution parameters)
embedding_cpu:
  # Dataset-specific parameters
  enabled: true
  methods: ["hvg", "pca", "scvi_fm"]

embedding_gpu:
  enabled: true
  methods: ["geneformer"]

# Dataset creation overrides
dataset_creation:
  # Dataset-specific parameters
  enabled: true
  use_nextcloud: true
  required_obsm_keys: ["X_pca", "X_scvi_fm", "X_hvg", "X_geneformer"]
  cs_length: [50, 512]
  negatives_per_sample: 3
  split_dataset: true # Important for training datasets. Set to false for test datasets.
  dataset_format: "single" # "pairs" or "multiplets" for training datasets. Set to "single" for test datasets.
