# Dataset configuration for cellxgene pseudo bulk 10k dataset
# Inherits from dataset_default_train.yaml for training-specific defaults
defaults:
  - dataset_default_train.yaml
  - _self_

# =============================================================================
# DATASET METADATA
# =============================================================================
dataset:
  name: "cellxgene_pseudo_bulk_10k"
  description: "CellxGene pseudo bulk dataset with 10k samples (subset of full data)"
  download_url: "https://medical-epigenomics.org/papers/schaefer2024/data/datasets/cellxgene_census/full_data.h5ad" # Same URL as 3_5k
  full_name: "cellxgene_pseudo_bulk_full"
  # file_path will be auto-generated as: data/RNA/raw/train/cellxgene_pseudo_bulk_10k.h5ad

# =============================================================================
# COMMON KEYS
# =============================================================================
batch_key: "dataset_title"
annotation_key: "cell_type"
caption_key: "natural_language_annotation"
instrument_key: "assay"
other_bio_labels: ["tissue"]

# =============================================================================
# DOWNLOAD OVERRIDES
# =============================================================================
download:
  enabled: true # Enable download for this dataset
  subset_size: 10000 # Create a subset of 10k cells (different from 3_5k)
  seed: 42 # Same seed for reproducibility
  stratify_keys: null # Will be auto-generated as [batch_key, annotation_key]
  preserve_proportions: true # Preserve proportions when stratifying
  validate: true # Validate downloaded file format
  keep_full_file: true # Keep the full downloaded file for future subsetting

# =============================================================================
# DATASET CREATION OVERRIDES
# =============================================================================
dataset_creation:
  # Override dataset format for this specific dataset
  dataset_format: "multiplets"

  # Override required embedding keys if needed
  required_obsm_keys: ["X_pca", "X_scvi_fm", "X_hvg"]

  # Override sentence keys if needed
  sentence_keys:
    - "sample_id_og"
    - "cell_sentence"
    - "semantic_true"
    - "semantic_similar"

  # Override other parameters if needed
  negatives_per_sample: 2
  cs_length: 10
