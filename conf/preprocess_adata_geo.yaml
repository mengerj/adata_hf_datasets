# conf/preprocess_adata.yaml
defaults:
  - preprocess_adata_default.yaml
# Input file path
input_file: "data/RNA/raw/train/geo_7k.h5ad"

# Output directory for processed files
output_dir: "data/RNA/processed/train"
overwrite: true
# Train/validation split configuration
split_dataset: true
train_split: 0.9
# If false, the script will NOT split into train/val but instead
# output a single 'all.h5ad' file. This can be used for test data.

#For batch aware highly variable gene selection:
batch_key: "study"
n_top_genes: 1000
# whether to split the dataset based on the bimodal distrbution of some continous covariate.
#In the geo dataset, a strong bimodal distribution was observed that couldnt be explained by any technical or biological covariate.
split_bimodal: true
bimodal_col: "readsaligned" #will be log-transformed internally

#additional columns to add to the adata object from sra database
extra_sra_cols:
  - "library_source"
  - "library_layout"
  - "instrument"
sra_chunk_size: 10000 #number of samples to fetch from sra at once. This is to avoid overloading the server.
#to append the instrument to the description. Set any of them to null if you want to skip.
instrument_key: "instrument" #key in adata.obs that contains the instrument information
description_key: "natural_language_annotation"
# Filter certain low frequency categories
categories:
  - "library_source"
  - "molecule_ch1"
  - "library_layout"
  - "instrument"
  - "study"
category_threshold: 10 # remove all categories that have less than the threshold

#For Plotting
metrics_of_interest: #these numeric metrics will be plotted as a distribution
  - "n_genes_by_counts"
  - "total_counts"
  - "readsaligned_log"
categories_of_interest: #This will be used to colour a pca, and check the distribution of the metrics_of_interest
  - "library_source"
  - "molecule_ch1"
  - "sample_type"
  - "instrument"
  - "study"
